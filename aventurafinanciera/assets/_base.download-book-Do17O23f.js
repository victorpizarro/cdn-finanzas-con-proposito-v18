import{j as e}from"./jsx-runtime-DrDP4jKM.js";import{A as c}from"./abstract-gray-loop-C8zS91ny.js";import{d as s}from"./index-Dc6P1OXb.js";import{r as n}from"./index-DPzuYzxM.js";import{g as d}from"./auth-D2p3Ysfq.js";import{e as r}from"./environment-Mqz1F-Rt.js";import{c as p}from"./index-kqjhJLLg.js";import{d as u,F as x}from"./components-luAo7umQ.js";import{m as f,a as g,b}from"./chunk-II5OMS4Q-B6qxbQ_i.js";import"./_commonjsHelpers-C4iS2aBk.js";import"./util-DVlLIp8b.js";import"./responses-JPWar71Q.js";import"./router-JOb6U47x.js";import"./index-CgQdyTPq.js";import"./import-KpIH9fyR.js";import"./Combination-vy5DdgBQ.js";import"./import-C_SV6fS0.js";const P=async()=>{const{loggedIn:o}=d();return o?s.json({url:r.bookDirectLink}):s.redirect(`${r.basePath}/login?redirect=${r.basePath}/download-book`)};function B({error:o}){const i=p(),{url:a}=u()||{},[l,m]=n.useState(0);return n.useEffect(()=>{const t=window.setTimeout(()=>{window.open(a,"_blank")},3e3);return m(t),()=>window.clearTimeout(t)},[]),e.jsx(f,{isOpen:!0,onClose:()=>{var t;i("..",{preventScrollReset:!0,replace:!0}),window.clearTimeout(l),(t=window.parent)==null||t.postMessage("book_downloaded","*")},size:"2xl",placement:"center",className:"overflow-hidden bg-background",children:e.jsx(g,{children:t=>e.jsxs(x,{method:"post",onSubmit:()=>t(),children:[e.jsxs(b,{className:"flex flex-col px-8 py-24 lg:px-12",children:[o&&e.jsx("span",{className:"text-center text-danger",children:o}),e.jsx("h1",{className:"text-center font-title text-2xl font-black text-primary lg:text-3xl",children:"La descarga iniciará en breve"}),e.jsxs("p",{className:"mt-4 text-center text-[#889FBC]",children:["Si no inicia automáticamente, haz clic"," ",e.jsx("a",{href:a,target:"_blank",rel:"noreferrer",className:"text-primary",children:"aquí"}),"."]})]}),e.jsx(c,{className:"absolute -left-24 -top-[10%] -z-10 w-[125%] text-gray-200/20"})]})})})}export{P as clientLoader,B as default};
